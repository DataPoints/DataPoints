

<%= link_to 'Back', datasets_path , style: 'left: 35px'%><br>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Start Analyze
</button>
<br>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Analyze Information</h4>
      </div>
      <div class="modal-body">
        Analyze can take a lot of time. Go for a cup of coffee and chillax. We will send you a email to let you know, that your dataset is over.   
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>  
        <%= form_tag({controller: 'datasets', action: 'start_analyze'}, method: 'get', class: 'jahoda', data: {status: @dataset.status} ) do %>
          <%= hidden_field_tag :id , @dataset.id %>
          <%= submit_tag 'Start Analyze', class: 'btn btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<table class="table table-striped" style="width: 400px; margin-left: 50px;">
  <tr>
    <td><b>Dataset name: </b></td>
    <td><%= @dataset.name %></td>
  </tr>
  <tr>
    <td><b>Dataset description: </b></td>
    <td><%= @dataset.description %></td>
  </tr>
  <tr>
    <td><b>Dataset created_at: </b> </td>
    <td><%= @dataset.created_at.strftime('%d %b %H:%M') %></td>
  </tr>
  <tr>
    <td><b>Dataset updated_at: </b> </td>
    <td><%= @dataset.updated_at.strftime('%d %b %H:%M') %></td>
  </tr>
  <tr>
    <td><b>Dataset analyzed_progress: </b></td>
    <td> <%= @dataset.analyzed_progress %></td>
  </tr>
  <tr>
    <td><b>Dataset pocet riadkov: </b></td>
    <td> <%= @data.count %></td>
  </tr>
</table>

<br><br><br>

<table class="table table-striped table-bordered" style="margin-left: 50px;">
  <tr>
    <% for i in 0..@names_of_data_columns.count %>
        <th><%= @names_of_data_columns[i] %></th>
    <% end %>
  </tr>
<% for i in 1..@number_of_data_rows do %>
    <% data_row = @data.find(i) %>
      <tr>
        <% for j in 0..@names_of_data_columns.count %>
            <td><%= data_row[@names_of_data_columns[j]] %></td>
        <% end %>
      </tr>
<% end %>
</table>


<%= form_tag({controller: 'datasets', action: 'change_type'}, method: 'get') do %>
    Meno stlpca
    <%= select_tag(:column_id, options_for_select(@columns.collect {|column| [ column.label, column.id ]})) %>
    Typ v stlpci
    <%= select_tag(:type_id, options_for_select([['Adresa', 1],['Meno', 2]])) %>
    <%= hidden_field_tag :id , @dataset.id %>
    <%= submit_tag 'Update', class: 'btn btn-primary' %>
<% end %>
